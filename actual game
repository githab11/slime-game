import random
from colorama import Fore, Back, Style

devmode = input("Would you like to enable dev controls?: ")
if devmode[0].lower() == 'y':
    Setplayerdamage = int(input("Damage?: "))
    Setplayerhealth = int(input("Max Health?: "))
    player_maxhealth = 10
    player_health = Setplayerhealth
    player_maxhealth = Setplayerhealth
    player_damage = Setplayerdamage
else:
    player_maxhealth = 10
    player_health = 10
    player_damage = 2
# Define all vars
slimehealth = random.randint(5, 7)
slimedamage = random.randint(2, 3)
skeleton_health = random.randint(6, 9)
skeleton_damage = random.randint(3, 4)
alive = True

print(Fore.RED + "Welcome to my game.")

# Import stats
def stats(player_health, player_damage):
    view_stats = input(Fore.LIGHTGREEN_EX + "Would you like to view your stats (y/n)?: ")
    if view_stats == 'y':
        print("Your health is: ", Fore.RED + str(player_health))
        print("Your damage is: ", Fore.LIGHTRED_EX + str(player_damage))
    elif view_stats == 'n':
        pass

# Import slime
def slime_attack():
    global player_health, slimehealth, slimedamage, player_maxhealth, player_damage
    print(Fore.YELLOW + "You encounter a slime!")
    print(Fore.RED + "Slime's dmg is: " + str(slimedamage))

    while slimehealth >= 0:
        slime_input = input(Fore.LIGHTGREEN_EX + "Would you like to attack the slime? (y/n): ")

        if slime_input[0].lower() == 'y':
            slimehealth -= player_damage  # Update the slime's health
            print(Fore.LIGHTRED_EX + "The slime's health is: " + str(slimehealth))
            print(Fore.RED + "You're now at " + str(player_health) + "!")
            player_health -= slimedamage
        elif slime_input[0].lower() == 'n':
            print(Fore.GREEN + "The slime attacked you for: " + str(slimedamage))
        else:
            print(Fore.GREEN + "Invalid input, detecting you would attack.")
            player_health -= slimedamage

    if slimehealth < 0 or slimehealth == 0:
        print(Fore.LIGHTBLACK_EX + "You win!")

        # Rerolling the slime stats
        slimehealth = random.randint(5, 7)
        slimedamage = random.randint(2, 3)

        print(Fore.RED + "You have been healed to " + str(player_maxhealth) + " Health!")
        player_health = player_maxhealth
        level_up = input("Would you like to level up strength or health??: ")
        if level_up[0].lower() == 'h' or level_up[0].lower() == 'm': # input to increase health
            player_maxhealth += 1
            print("your max health has increased by 1, your max health is now", player_health)
        elif level_up[0].lower() == 'd' or level_up[0].lower() == 's': # input to increase damage
            player_damage += 1
            print("your damage has increased by 1, your damage is now", player_damage)
        else:
            print("Invalid input, leveling up damage")
            player_damage += 1
            print("Damage is now" + player_damage)

    if player_health <= 0:
        alive = False
        print("You lose!")

def skeleton_fight():
    global player_health, player_damage, player_maxhealth, skeleton_health, skeleton_damage
    print(Fore.LIGHTWHITE_EX + "You encounter a Skeleton!")

    print(Fore.WHITE + "Skele's dmg is: " + str(slimedamage))
    while skeleton_health >= 0:
        skeleton_input = input("Would you like to attack the skeleton? (Y/N): ")
        # Check if player says yes
        if skelton_input[0].lower() == 'y':
            print("You have attacked the skeleton for " + str(player_damage))
            # Change vars
            skeleton_health -= player_damage
            player_health -= skeleton_damage
            print("The skeleton has attacked you for: " + str(skeleton_damage))
        # Check if player says no
        if skeleton_input[0].lower() == 'n':
            print("You have chose not to attack")
            print("The skeleton has attacked you for: " + str(skeleton_damage))
    if skeleton_health == 0 or skeleton_health <= 0:
        print("You win!")
        # Reroll skeleton stats
        skeleton_health = random.randint(6, 9)
        skeleton_damage = random.randint(3, 4)

        print(Fore.RED + "You have been healed to", player_maxhealth)
        player_health = player_maxhealth

    # Import leveling system
        level_up1 = input("Would you like to level up strength or health??: ")
        if level_up1[0].lower() == 'h' or level_up1[0].lower() == 'm': # input to increase health
            player_maxhealth += 2
            str(print("your max health has increased by 1, your damage is now", player_health))
        elif level_up1[0].lower() == 'd' or level_up1[0].lower() == 's': # input to increase damage
            player_damage += 2
            str(print("your damage has increased by 2, your damage is now", player_damage))
        else:
            print("Invalid input, leveling up damage")
            player_damage += 2
            print("Damage is now" + player_damage)
    if player_health == 0 or player_health <= 0:
        alive = False
        print("You died")





def level_up():
    global player_damage, player_health
    if player_damage >= 4 and player_health >= 15:
        advance = input("Would you like to advance to the next area? (Y/N): ")
        if advance[0].lower() == 'y':
            print("Advancing")
            skeleton_fight()
        elif advance[0].lower() == 'n':
            slime_attack()


# Actual game
while alive == True:
    stats(player_health, player_damage)
    slime_attack()
    level_up()
